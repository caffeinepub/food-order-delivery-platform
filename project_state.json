{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 33,
  "summary": "Two separate standalone web apps sharing a single backend: (1) a Customer Portal (The Deccan BHOJAN) with Internet Identity login, nav bar (Browse Menu, My Orders, Account), menu browsing, cart, checkout pre-filled from profile, order history, and account management; and (2) a Courier App with a PIN-based access gate (PIN: 1953), a simplified order dashboard with only Delete and Deliver actions (no intermediate prep stages — order goes directly from pending → delivered), and a Menu Management section (add, edit, toggle availability, delete items). Both apps share one Motoko backend actor handling orders, menu, and customer profiles. No cross-app navigation.",
  "architectural_notes": [
    "Two separate standalone frontend deployments (Customer Portal + Courier App) sharing one Motoko backend actor",
    "Customer Portal uses Internet Identity for authentication; orders are tied to logged-in user principal",
    "Courier App access is gated by PIN '1953'; no Internet Identity required for courier access",
    "Courier App order status flow simplified: pending → delivered only (no accepted/preparing/out_for_delivery steps); each order card shows only Delete and Deliver actions"
  ],
  "known_issues": [
    "Add Item form submission in Courier App Menu Management silently fails — mutation does not fire or complete, no error shown to user",
    "Courier App Menu Management shows 'admin access needed' error blocking menu edits for PIN-authenticated users",
    "Orders placed in Customer Portal do not appear on Courier App dashboard",
    "Toggling menu item availability in Menu Management permanently deletes the item instead of flipping the availability flag",
    "Orders disappear on Customer Portal refresh — frontend relies on transient React state instead of re-fetching from backend",
    "Courier App order status resets to 'Accept Order' on refresh — status not sourced from backend stable map on load",
    "Order status updates by courier do not reflect on Customer Portal — no polling or query invalidation in place",
    "Backend addMenuItem returns 'Unauthorized: Only admins can add menu items' for PIN-authenticated courier users — admin role check not fully removed from backend",
    "'Failed to load orders' error on Customer Portal — orders query failing with authorization or fetch error"
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-build-the-customer-portal-as-the-primary-frontend-view-it-must-include-a-menu-browsing-page-showing-available-food-items-grouped-by-category-with-names-descriptions-and-prices-a-shopping-cart-sidebar-or-panel-where-customers-can-add-remove-items-and-see-the-running-total-a-checkout-form-collecting-customer-name-and-phone-number-and-an-order-confirmation-screen-showing-the-assigned-orderid-and-initial-status",
      "title": "Build the Customer Portal as the primary frontend view. It must include: a menu browsing page showing available food items grouped by category with names, descriptions, and prices; a shopping cart sidebar or panel where customers can add/remove items and see the running total; a checkout form collecting customer name and phone number; and an order confirmation screen showing the assigned orderId and initial status.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-courier-app-as-a-second-distinct-frontend-view-accessible-via-a-separate-route-such-as-courier-it-must-display-all-incoming-orders-in-a-dashboard-allow-a-courier-to-accept-a-pending-order-and-provide-status-update-controls-to-advance-an-order-through-the-lifecycle-pending-accepted-preparing-out-for-delivery-delivered-orders-should-be-grouped-or-filterable-by-status-each-order-card-must-show-orderid-customer-name-ordered-items-total-price-and-current-status",
      "title": "Build the Courier App as a second distinct frontend view (accessible via a separate route such as '/courier'). It must display all incoming orders in a dashboard, allow a courier to accept a pending order, and provide status update controls to advance an order through the lifecycle: pending → accepted → preparing → out_for_delivery → delivered. Orders should be grouped or filterable by status. Each order card must show: orderId, customer name, ordered items, total price, and current status.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-top-level-navigation-bar-that-lets-users-switch-between-the-customer-portal-and-the-courier-app-include-clear-labels-order-food-customer-portal-and-courier-dashboard-apply-a-cohesive-appetizing-visual-theme-across-both-views-warm-tones-deep-orange-cream-charcoal-with-bold-typography-card-based-layouts-and-smooth-status-badge-transitions-enforce-the-theme-consistently-on-all-shared-components-nav-buttons-cards-status-badges",
      "title": "Add a top-level navigation bar that lets users switch between the Customer Portal and the Courier App. Include clear labels: 'Order Food' (customer portal) and 'Courier Dashboard'. Apply a cohesive, appetizing visual theme across both views — warm tones (deep orange, cream, charcoal) with bold typography, card-based layouts, and smooth status badge transitions. Enforce the theme consistently on all shared components (nav, buttons, cards, status badges).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-integrate-internet-identity-authentication-into-the-customer-portal-add-login-logout-controls-to-the-navigation-bar-protected-routes-my-orders-account-should-redirect-unauthenticated-users-to-a-login-prompt-support-passkeys-google-apple-and-microsoft-sign-in-methods-via-internet-identity",
      "title": "Integrate Internet Identity authentication into the Customer Portal. Add login/logout controls to the navigation bar. Protected routes (My Orders, Account) should redirect unauthenticated users to a login prompt. Support passkeys, Google, Apple, and Microsoft sign-in methods via Internet Identity.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-navigation-bar-to-the-customer-portal-with-three-tabs-browse-menu-my-orders-and-account-the-existing-top-level-shared-navigation-linking-to-the-courier-dashboard-must-be-removed-from-the-customer-portal-the-courier-app-must-have-no-link-back-to-the-customer-portal",
      "title": "Add a navigation bar to the Customer Portal with three tabs: 'Browse Menu', 'My Orders', and 'Account'. The existing top-level shared navigation linking to the Courier Dashboard must be removed from the Customer Portal. The Courier App must have no link back to the Customer Portal.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-build-a-my-orders-view-inside-the-customer-portal-when-the-user-is-authenticated-fetch-and-display-their-full-order-history-using-getordersbycustomer-keyed-by-their-principal-each-order-entry-must-show-orderid-order-date-time-list-of-items-with-quantities-total-price-and-current-status-badge-orders-should-be-sorted-newest-first",
      "title": "Build a 'My Orders' view inside the Customer Portal. When the user is authenticated, fetch and display their full order history using getOrdersByCustomer keyed by their principal. Each order entry must show: orderId, order date/time, list of items with quantities, total price, and current status badge. Orders should be sorted newest first.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-build-an-account-view-inside-the-customer-portal-display-and-allow-editing-of-the-logged-in-user-s-saved-name-and-phone-number-using-getprofile-and-saveprofile-also-show-a-summary-of-the-user-s-recent-orders-the-checkout-form-must-pre-fill-name-and-phone-from-the-saved-profile-when-the-user-is-authenticated",
      "title": "Build an 'Account' view inside the Customer Portal. Display and allow editing of the logged-in user's saved name and phone number using getProfile and saveProfile. Also show a summary of the user's recent orders. The checkout form must pre-fill name and phone from the saved profile when the user is authenticated.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-frontend-router-so-that-navigating-to-courier-correctly-renders-the-courierapp-page-component-instead-of-a-not-found-page-the-root-route-must-continue-to-render-the-customerportal-both-routes-must-be-registered-and-handled-by-tanstack-router-in-app-tsx",
      "title": "Fix the frontend router so that navigating to '/courier' correctly renders the CourierApp page component instead of a Not Found page. The root '/' route must continue to render the CustomerPortal. Both routes must be registered and handled by TanStack Router in App.tsx.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-diagnose-and-fix-the-courier-app-dashboard-so-that-orders-are-successfully-fetched-and-rendered-the-useallorders-hook-in-frontend-src-hooks-usequeries-ts-must-correctly-call-the-backend-getallorders-function-via-the-actor-the-courierapp-page-component-must-handle-loading-error-and-empty-states-gracefully-and-render-the-full-list-of-orders-when-data-is-returned-ensure-the-actor-is-initialized-before-the-query-runs-do-not-call-getallorders-on-a-null-or-undefined-actor",
      "title": "Diagnose and fix the Courier App dashboard so that orders are successfully fetched and rendered. The `useAllOrders` hook in `frontend/src/hooks/useQueries.ts` must correctly call the backend `getAllOrders` function via the actor. The `CourierApp` page component must handle loading, error, and empty states gracefully, and render the full list of orders when data is returned. Ensure the actor is initialized before the query runs (do not call `getAllOrders` on a null or undefined actor).",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-rename-the-app-to-the-deccan-bhojan-everywhere-it-appears-in-the-frontend-page-titles-navigation-headers-footer-branding-html-title-tags-and-any-hardcoded-strings-in-both-the-customer-portal-and-courier-app",
      "title": "Rename the app to 'The Deccan BHOJAN' everywhere it appears in the frontend: page titles, navigation headers, footer branding, HTML <title> tags, and any hardcoded strings in both the Customer Portal and Courier App.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-add-react-query-mutation-hooks-for-the-four-new-menu-management-backend-functions-addmenuitem-updatemenuitem-togglemenuitemavailability-deletemenuitem-in-frontend-src-hooks-usequeries-ts-each-mutation-must-invalidate-the-menu-query-on-success-so-the-ui-reflects-the-latest-state",
      "title": "Add React Query mutation hooks for the four new menu management backend functions (addMenuItem, updateMenuItem, toggleMenuItemAvailability, deleteMenuItem) in frontend/src/hooks/useQueries.ts. Each mutation must invalidate the menu query on success so the UI reflects the latest state.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-dedicated-menu-management-section-to-the-courier-app-frontend-src-pages-courierapp-tsx-this-section-must-be-accessible-via-a-tab-or-clearly-labelled-button-in-the-courier-app-s-internal-navigation-it-must-display-all-existing-menu-items-fetched-via-usemenu-in-a-card-or-table-layout-and-provide-the-following-controls-per-item-an-edit-button-opening-an-inline-form-or-modal-to-update-name-description-price-and-category-a-toggle-switch-or-button-to-enable-disable-availability-and-a-delete-button-with-a-confirmation-prompt-a-separate-add-item-button-must-open-a-form-modal-to-create-a-new-menu-item-with-fields-for-name-description-price-and-category-all-actions-must-use-the-mutation-hooks-from-req-16-and-reflect-changes-immediately-upon-success",
      "title": "Add a dedicated 'Menu Management' section to the Courier App (frontend/src/pages/CourierApp.tsx). This section must be accessible via a tab or clearly labelled button in the Courier App's internal navigation. It must display all existing menu items (fetched via useMenu) in a card or table layout and provide the following controls per item: an Edit button opening an inline form or modal to update name, description, price, and category; a toggle switch or button to enable/disable availability; and a Delete button with a confirmation prompt. A separate 'Add Item' button must open a form/modal to create a new menu item with fields for name, description, price, and category. All actions must use the mutation hooks from REQ-16 and reflect changes immediately upon success.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-pin-based-access-gate-to-the-courier-app-at-courier-when-a-user-visits-the-route-they-must-first-see-a-pin-entry-screen-styled-with-the-app-s-warm-orange-cream-theme-instead-of-the-dashboard-if-the-user-enters-the-pin-1953-and-submits-access-is-granted-and-the-full-courier-app-dashboard-is-shown-if-the-pin-is-incorrect-display-a-clear-error-message-the-granted-access-state-must-be-persisted-in-localstorage-so-the-user-does-not-need-to-re-enter-the-pin-on-page-refresh-a-lock-or-sign-out-button-must-be-visible-in-the-courier-app-ui-to-clear-the-access-state-and-return-the-user-to-the-pin-entry-screen-remove-or-bypass-any-existing-internet-identity-role-based-access-control-checks-that-are-currently-blocking-users-in-courierapp-tsx",
      "title": "Add a PIN-based access gate to the Courier App at '/courier'. When a user visits the route, they must first see a PIN entry screen (styled with the app's warm orange/cream theme) instead of the dashboard. If the user enters the PIN '1953' and submits, access is granted and the full Courier App dashboard is shown. If the PIN is incorrect, display a clear error message. The granted access state must be persisted in localStorage so the user does not need to re-enter the PIN on page refresh. A 'Lock' or 'Sign Out' button must be visible in the Courier App UI to clear the access state and return the user to the PIN entry screen. Remove or bypass any existing Internet Identity / role-based access control checks that are currently blocking users in CourierApp.tsx.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-add-item-form-submission-in-the-menu-management-section-of-the-courier-app-frontend-src-components-menumanagementsection-tsx-the-form-s-submit-handler-must-correctly-call-the-useaddmenuitem-mutation-hook-ensure-the-actor-is-initialized-and-non-null-before-the-mutation-is-invoked-the-mutation-must-be-awaited-and-the-form-modal-must-close-on-success-if-the-mutation-fails-display-a-visible-error-message-to-the-user-the-form-must-not-silently-fail-under-any-circumstances",
      "title": "Fix the 'Add Item' form submission in the Menu Management section of the Courier App (frontend/src/components/MenuManagementSection.tsx). The form's submit handler must correctly call the useAddMenuItem mutation hook. Ensure the actor is initialized and non-null before the mutation is invoked. The mutation must be awaited and the form/modal must close on success. If the mutation fails, display a visible error message to the user. The form must not silently fail under any circumstances.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-consistent-white-and-orange-f97316-color-scheme-across-the-entire-customer-portal-replace-all-transparent-missing-or-cream-charcoal-backgrounds-with-solid-white-ffffff-for-page-and-card-backgrounds-use-f97316-vibrant-orange-as-the-primary-accent-color-for-the-navigation-bar-background-or-border-active-tab-indicators-buttons-primary-cta-add-to-cart-checkout-status-badges-icons-links-and-any-highlighted-ui-elements-ensure-no-surface-appears-transparent-or-uncolored-every-section-must-have-a-clearly-defined-background-fill",
      "title": "Apply a consistent white and orange (#F97316) color scheme across the entire Customer Portal. Replace all transparent, missing, or cream/charcoal backgrounds with solid white (#FFFFFF) for page and card backgrounds. Use #F97316 (vibrant orange) as the primary accent color for: the navigation bar background or border, active tab indicators, buttons (primary CTA, add-to-cart, checkout), status badges, icons, links, and any highlighted UI elements. Ensure no surface appears transparent or uncolored — every section must have a clearly defined background fill.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-the-same-consistent-white-and-orange-f97316-color-scheme-across-the-entire-courier-app-replace-all-transparent-missing-or-cream-charcoal-backgrounds-with-solid-white-ffffff-for-page-and-card-backgrounds-use-f97316-as-the-primary-accent-for-the-pin-entry-screen-background-header-pin-input-border-focus-rings-the-submit-button-the-courier-dashboard-nav-tab-bar-order-cards-action-buttons-accept-update-status-status-badges-the-menu-management-section-headers-add-item-button-edit-delete-controls-and-the-lock-button-the-pin-entry-screen-must-have-a-clearly-filled-background-white-with-orange-accents-not-transparent",
      "title": "Apply the same consistent white and orange (#F97316) color scheme across the entire Courier App. Replace all transparent, missing, or cream/charcoal backgrounds with solid white (#FFFFFF) for page and card backgrounds. Use #F97316 as the primary accent for: the PIN entry screen background header, PIN input border/focus rings, the submit button, the courier dashboard nav/tab bar, order cards, action buttons (Accept, Update Status), status badges, the Menu Management section headers, Add Item button, Edit/Delete controls, and the Lock button. The PIN entry screen must have a clearly filled background (white with orange accents) — not transparent.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-global-css-custom-properties-and-tailwind-theme-tokens-in-frontend-src-index-css-and-frontend-tailwind-config-js-to-reflect-the-white-and-orange-palette-as-the-canonical-theme-set-the-default-background-token-to-white-and-the-primary-color-token-to-f97316-remove-or-override-any-oklch-based-tokens-that-resolve-to-transparent-or-near-transparent-values-for-backgrounds-ensure-the-base-body-background-is-solid-white",
      "title": "Update the global CSS custom properties and Tailwind theme tokens in frontend/src/index.css and frontend/tailwind.config.js to reflect the white and orange palette as the canonical theme. Set the default background token to white and the primary color token to #F97316. Remove or override any OKLCH-based tokens that resolve to transparent or near-transparent values for backgrounds. Ensure the base body background is solid white.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-all-remaining-role-based-access-control-and-admin-permission-checks-from-the-courier-app-s-menu-management-section-specifically-in-frontend-src-components-menumanagementsection-tsx-and-frontend-src-pages-courierapp-tsx-remove-any-guard-that-checks-for-an-admin-role-an-authenticated-internet-identity-principal-or-any-permission-level-before-allowing-the-user-to-add-edit-toggle-availability-or-delete-menu-items-a-user-who-has-passed-the-pin-gate-pin-1953-must-have-full-unrestricted-access-to-all-menu-management-operations-without-any-additional-access-checks",
      "title": "Remove all remaining role-based access control and admin permission checks from the Courier App's Menu Management section. Specifically, in frontend/src/components/MenuManagementSection.tsx and frontend/src/pages/CourierApp.tsx, remove any guard that checks for an admin role, an authenticated Internet Identity principal, or any permission level before allowing the user to add, edit, toggle availability, or delete menu items. A user who has passed the PIN gate (PIN: 1953) must have full, unrestricted access to all menu management operations without any additional access checks.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-useallorders-hook-in-frontend-src-hooks-usequeries-ts-and-the-courier-app-dashboard-in-frontend-src-pages-courierapp-tsx-to-ensure-all-orders-are-fetched-correctly-the-query-must-call-actor-getallorders-not-a-per-customer-variant-must-not-filter-results-by-any-identity-or-principal-and-must-re-fetch-after-any-order-related-mutation-e-g-status-update-accept-ensure-the-actor-is-non-null-before-the-query-fires",
      "title": "Fix the `useAllOrders` hook in `frontend/src/hooks/useQueries.ts` and the Courier App dashboard in `frontend/src/pages/CourierApp.tsx` to ensure all orders are fetched correctly. The query must call `actor.getAllOrders()` (not a per-customer variant), must not filter results by any identity or principal, and must re-fetch after any order-related mutation (e.g., status update, accept). Ensure the actor is non-null before the query fires.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-usetogglemenuitemavailability-mutation-hook-in-frontend-src-hooks-usequeries-ts-so-it-calls-actor-togglemenuitemavailability-itemid-and-not-actor-deletemenuitem-or-any-delete-adjacent-function-after-a-successful-toggle-the-mutation-must-invalidate-the-menu-query-so-the-ui-reflects-the-updated-availability-state-immediately-in-frontend-src-components-menumanagementsection-tsx-the-availability-toggle-control-must-invoke-only-the-toggle-mutation-never-the-delete-mutation",
      "title": "Fix the `useToggleMenuItemAvailability` mutation hook in `frontend/src/hooks/useQueries.ts` so it calls `actor.toggleMenuItemAvailability(itemId)` and not `actor.deleteMenuItem` or any delete-adjacent function. After a successful toggle, the mutation must invalidate the menu query so the UI reflects the updated availability state immediately. In `frontend/src/components/MenuManagementSection.tsx`, the availability toggle control must invoke only the toggle mutation, never the delete mutation.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-useallorders-hook-in-frontend-src-hooks-usequeries-ts-to-call-actor-getallorders-not-any-per-customer-or-identity-filtered-variant-ensure-the-actor-is-non-null-before-the-query-fires-and-ensure-the-query-re-fetches-after-any-order-related-mutation-status-update-accept-place-order-in-frontend-src-pages-courierapp-tsx-ensure-the-dashboard-renders-the-full-returned-order-list-and-handles-loading-error-and-empty-states-gracefully",
      "title": "Fix the useAllOrders hook in frontend/src/hooks/useQueries.ts to call actor.getAllOrders() (not any per-customer or identity-filtered variant), ensure the actor is non-null before the query fires, and ensure the query re-fetches after any order-related mutation (status update, accept, place order). In frontend/src/pages/CourierApp.tsx, ensure the dashboard renders the full returned order list and handles loading, error, and empty states gracefully.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-customer-portal-frontend-src-pages-customerportal-tsx-and-frontend-src-hooks-usequeries-ts-so-that-the-active-recent-order-state-is-never-held-exclusively-in-transient-react-component-state-on-mount-and-on-navigation-to-the-menu-or-order-confirmation-view-the-portal-must-re-fetch-the-user-s-latest-orders-from-the-backend-via-getordersbycustomer-the-useordersbycustomer-hook-must-be-enabled-whenever-the-actor-and-identity-are-available-and-its-result-must-be-the-authoritative-source-of-order-data-not-sessionstorage-or-in-memory-state-alone",
      "title": "Fix the Customer Portal (`frontend/src/pages/CustomerPortal.tsx` and `frontend/src/hooks/useQueries.ts`) so that the active/recent order state is never held exclusively in transient React component state. On mount and on navigation to the Menu or Order Confirmation view, the portal must re-fetch the user's latest orders from the backend via `getOrdersByCustomer`. The `useOrdersByCustomer` hook must be enabled whenever the actor and identity are available, and its result must be the authoritative source of order data — not sessionStorage or in-memory state alone.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-orderconfirmation-component-frontend-src-components-orderconfirmation-tsx-to-poll-getorderbyid-or-equivalent-for-the-specific-order-s-latest-status-every-8-seconds-the-status-displayed-in-the-progress-stepper-must-always-reflect-the-value-returned-from-the-backend-not-local-component-state-set-at-order-placement-time-on-remount-e-g-after-a-page-refresh-the-component-must-accept-the-orderid-prop-and-immediately-fetch-the-current-status-from-the-backend-before-rendering",
      "title": "Fix the `OrderConfirmation` component (`frontend/src/components/OrderConfirmation.tsx`) to poll `getOrderById` (or equivalent) for the specific order's latest status every 8 seconds. The status displayed in the progress stepper must always reflect the value returned from the backend, not local component state set at order placement time. On remount (e.g., after a page refresh), the component must accept the `orderId` prop and immediately fetch the current status from the backend before rendering.",
      "reqIds": [
        "REQ-35"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-myordersview-component-frontend-src-components-myordersview-tsx-and-its-underlying-useordersbycustomer-hook-in-frontend-src-hooks-usequeries-ts-to-poll-for-updated-order-statuses-the-query-must-refetch-at-least-every-15-seconds-when-the-view-is-active-and-must-also-refetch-immediately-after-any-order-related-mutation-place-order-cancel-order-status-badges-displayed-in-the-order-history-list-must-reflect-the-latest-value-from-the-backend",
      "title": "Fix the `MyOrdersView` component (`frontend/src/components/MyOrdersView.tsx`) and its underlying `useOrdersByCustomer` hook in `frontend/src/hooks/useQueries.ts` to poll for updated order statuses. The query must refetch at least every 15 seconds when the view is active, and must also refetch immediately after any order-related mutation (place order, cancel order). Status badges displayed in the order history list must reflect the latest value from the backend.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-courier-app-dashboard-frontend-src-pages-courierapp-tsx-and-frontend-src-hooks-usequeries-ts-so-that-on-every-mount-including-after-a-hard-page-refresh-it-re-fetches-all-orders-from-the-backend-via-actor-getallorders-order-status-displayed-on-each-ordercard-must-come-directly-from-the-fetched-backend-data-not-from-local-component-state-the-useallorders-query-must-also-automatically-refetch-every-15-seconds-to-stay-current-and-must-invalidate-and-refetch-after-any-acceptorder-or-updateorderstatus-mutation-completes",
      "title": "Fix the Courier App dashboard (`frontend/src/pages/CourierApp.tsx` and `frontend/src/hooks/useQueries.ts`) so that on every mount (including after a hard page refresh) it re-fetches all orders from the backend via `actor.getAllOrders()`. Order status displayed on each `OrderCard` must come directly from the fetched backend data, not from local component state. The `useAllOrders` query must also automatically refetch every 15 seconds to stay current, and must invalidate and refetch after any `acceptOrder` or `updateOrderStatus` mutation completes.",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-useallorders-hook-in-frontend-src-hooks-usequeries-ts-so-its-query-function-calls-actor-getallorders-using-an-anonymous-or-unauthenticated-actor-not-an-identity-scoped-actor-ensuring-it-does-not-fail-when-the-user-is-not-logged-in-via-internet-identity-the-query-must-be-enabled-as-soon-as-the-actor-is-non-null-and-must-not-depend-on-an-authenticated-identity-if-the-current-actor-initialization-in-useactor-requires-authentication-to-call-getallorders-switch-the-courier-app-s-orders-query-to-use-the-anonymous-actor-variant",
      "title": "Fix the `useAllOrders` hook in `frontend/src/hooks/useQueries.ts` so its query function calls `actor.getAllOrders()` using an anonymous or unauthenticated actor (not an identity-scoped actor), ensuring it does not fail when the user is not logged in via Internet Identity. The query must be enabled as soon as the actor is non-null and must not depend on an authenticated identity. If the current actor initialization in `useActor` requires authentication to call `getAllOrders`, switch the Courier App's orders query to use the anonymous actor variant.",
      "reqIds": [
        "REQ-40"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-courier-app-dashboard-in-frontend-src-pages-courierapp-tsx-and-the-useallorders-hook-in-frontend-src-hooks-usequeries-ts-so-that-on-every-mount-including-after-a-hard-page-refresh-all-orders-are-re-fetched-from-the-backend-via-actor-getallorders-order-status-displayed-on-each-ordercard-must-come-directly-from-the-fetched-backend-data-not-from-any-local-component-state-the-useallorders-query-must-automatically-refetch-every-15-seconds-and-must-invalidate-and-refetch-immediately-after-any-acceptorder-or-updateorderstatus-mutation-completes",
      "title": "Fix the Courier App dashboard in `frontend/src/pages/CourierApp.tsx` and the `useAllOrders` hook in `frontend/src/hooks/useQueries.ts` so that on every mount (including after a hard page refresh) all orders are re-fetched from the backend via `actor.getAllOrders()`. Order status displayed on each `OrderCard` must come directly from the fetched backend data, not from any local component state. The `useAllOrders` query must automatically refetch every 15 seconds and must invalidate and refetch immediately after any `acceptOrder` or `updateOrderStatus` mutation completes.",
      "reqIds": [
        "REQ-41"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-myordersview-component-frontend-src-components-myordersview-tsx-and-the-useordersbycustomer-hook-in-frontend-src-hooks-usequeries-ts-so-that-order-status-badges-always-reflect-the-latest-value-from-the-backend-the-query-must-poll-refetch-at-least-every-15-seconds-when-the-view-is-active-and-must-also-refetch-immediately-after-any-order-related-mutation-place-order-cancel-order-the-hook-must-be-enabled-whenever-the-actor-and-identity-are-available",
      "title": "Fix the `MyOrdersView` component (`frontend/src/components/MyOrdersView.tsx`) and the `useOrdersByCustomer` hook in `frontend/src/hooks/useQueries.ts` so that order status badges always reflect the latest value from the backend. The query must poll (refetch) at least every 15 seconds when the view is active, and must also refetch immediately after any order-related mutation (place order, cancel order). The hook must be enabled whenever the actor and identity are available.",
      "reqIds": [
        "REQ-42"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-orderconfirmation-component-frontend-src-components-orderconfirmation-tsx-to-poll-the-backend-for-the-specific-order-s-latest-status-every-8-seconds-using-getorderbyid-or-an-equivalent-query-the-status-displayed-in-the-progress-stepper-must-always-reflect-the-value-returned-from-the-backend-on-remount-e-g-after-a-page-refresh-the-component-must-accept-the-orderid-prop-and-immediately-fetch-the-current-status-from-the-backend-before-rendering-it-must-never-display-a-stale-or-locally-cached-status",
      "title": "Fix the `OrderConfirmation` component (`frontend/src/components/OrderConfirmation.tsx`) to poll the backend for the specific order's latest status every 8 seconds using `getOrderById` or an equivalent query. The status displayed in the progress stepper must always reflect the value returned from the backend. On remount (e.g., after a page refresh), the component must accept the `orderId` prop and immediately fetch the current status from the backend before rendering — it must never display a stale or locally-cached status.",
      "reqIds": [
        "REQ-43"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-useallorders-hook-in-frontend-src-hooks-usequeries-ts-to-call-actor-getallorders-using-an-anonymous-or-unauthenticated-actor-so-it-never-fails-when-the-user-is-not-logged-in-via-internet-identity-the-query-must-be-enabled-as-soon-as-the-actor-is-non-null-and-must-not-depend-on-an-authenticated-identity-the-query-must-automatically-refetch-every-15-seconds-and-must-invalidate-and-refetch-immediately-after-any-acceptorder-updateorderstatus-or-placeorder-mutation-completes",
      "title": "Fix the `useAllOrders` hook in `frontend/src/hooks/useQueries.ts` to call `actor.getAllOrders()` using an anonymous or unauthenticated actor so it never fails when the user is not logged in via Internet Identity. The query must be enabled as soon as the actor is non-null and must not depend on an authenticated identity. The query must automatically refetch every 15 seconds and must invalidate and refetch immediately after any `acceptOrder`, `updateOrderStatus`, or `placeOrder` mutation completes.",
      "reqIds": [
        "REQ-45"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-courier-app-dashboard-in-frontend-src-pages-courierapp-tsx-so-that-on-every-mount-including-after-a-hard-page-refresh-all-orders-are-re-fetched-from-the-backend-via-actor-getallorders-order-status-displayed-on-each-ordercard-must-come-directly-from-the-fetched-backend-data-not-from-any-local-component-state-the-dashboard-must-handle-loading-error-and-empty-states-gracefully-and-render-the-full-list-of-returned-orders",
      "title": "Fix the Courier App dashboard in `frontend/src/pages/CourierApp.tsx` so that on every mount (including after a hard page refresh) all orders are re-fetched from the backend via `actor.getAllOrders()`. Order status displayed on each `OrderCard` must come directly from the fetched backend data, not from any local component state. The dashboard must handle loading, error, and empty states gracefully and render the full list of returned orders.",
      "reqIds": [
        "REQ-46"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-useordersbycustomer-hook-in-frontend-src-hooks-usequeries-ts-to-poll-refetch-at-least-every-15-seconds-when-active-and-to-also-refetch-immediately-after-any-order-related-mutation-place-order-cancel-order-the-hook-must-be-enabled-whenever-the-actor-and-identity-are-available-status-badges-in-myordersview-frontend-src-components-myordersview-tsx-must-always-reflect-the-latest-value-returned-from-the-backend-never-stale-or-locally-cached-state",
      "title": "Fix the `useOrdersByCustomer` hook in `frontend/src/hooks/useQueries.ts` to poll (refetch) at least every 15 seconds when active, and to also refetch immediately after any order-related mutation (place order, cancel order). The hook must be enabled whenever the actor and identity are available. Status badges in `MyOrdersView` (`frontend/src/components/MyOrdersView.tsx`) must always reflect the latest value returned from the backend, never stale or locally-cached state.",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-orderconfirmation-component-frontend-src-components-orderconfirmation-tsx-to-poll-getorderbyid-or-equivalent-backend-call-for-the-specific-order-s-latest-status-every-8-seconds-the-status-displayed-in-the-progress-stepper-must-always-reflect-the-value-returned-from-the-backend-never-local-component-state-set-at-order-placement-time-on-remount-e-g-after-a-page-refresh-the-component-must-accept-the-orderid-prop-and-immediately-fetch-the-current-status-from-the-backend-before-rendering-it-must-never-display-a-stale-or-locally-cached-status",
      "title": "Fix the `OrderConfirmation` component (`frontend/src/components/OrderConfirmation.tsx`) to poll `getOrderById` (or equivalent backend call) for the specific order's latest status every 8 seconds. The status displayed in the progress stepper must always reflect the value returned from the backend, never local component state set at order placement time. On remount (e.g., after a page refresh), the component must accept the `orderId` prop and immediately fetch the current status from the backend before rendering — it must never display a stale or locally-cached status.",
      "reqIds": [
        "REQ-48"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-customer-portal-frontend-src-pages-customerportal-tsx-so-that-active-recent-order-state-is-never-held-exclusively-in-transient-react-component-state-on-mount-and-on-navigation-to-the-menu-or-order-confirmation-view-the-portal-must-re-fetch-the-user-s-latest-orders-from-the-backend-via-getordersbycustomer-the-useordersbycustomer-hook-must-be-the-authoritative-source-of-order-data-not-sessionstorage-or-in-memory-state-alone-whenever-the-actor-and-identity-are-available",
      "title": "Fix the Customer Portal (`frontend/src/pages/CustomerPortal.tsx`) so that active/recent order state is never held exclusively in transient React component state. On mount and on navigation to the Menu or Order Confirmation view, the portal must re-fetch the user's latest orders from the backend via `getOrdersByCustomer`. The `useOrdersByCustomer` hook must be the authoritative source of order data — not sessionStorage or in-memory state alone — whenever the actor and identity are available.",
      "reqIds": [
        "REQ-49"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-useallorders-hook-in-frontend-src-hooks-usequeries-ts-so-that-it-uses-staletime-0-refetchonmount-always-and-refetchonwindowfocus-true-ensuring-a-fresh-fetch-from-actor-getallorders-on-every-mount-including-hard-page-refresh-the-query-must-not-rely-on-any-cached-or-local-state-as-the-source-of-truth-for-order-status",
      "title": "Fix the `useAllOrders` hook in `frontend/src/hooks/useQueries.ts` so that it uses `staleTime: 0`, `refetchOnMount: 'always'`, and `refetchOnWindowFocus: true`, ensuring a fresh fetch from `actor.getAllOrders()` on every mount including hard page refresh. The query must not rely on any cached or local state as the source of truth for order status.",
      "reqIds": [
        "REQ-50"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-frontend-src-pages-courierapp-tsx-so-that-each-ordercard-renders-its-status-value-exclusively-from-the-data-returned-by-the-useallorders-query-remove-any-local-component-state-e-g-usestate-that-holds-or-overrides-order-status-independently-of-the-fetched-backend-data-order-status-must-never-revert-to-a-stale-or-default-value-after-a-page-refresh",
      "title": "Fix `frontend/src/pages/CourierApp.tsx` so that each `OrderCard` renders its status value exclusively from the data returned by the `useAllOrders` query. Remove any local component state (e.g., `useState`) that holds or overrides order status independently of the fetched backend data. Order status must never revert to a stale or default value after a page refresh.",
      "reqIds": [
        "REQ-51"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-useallorders-query-in-frontend-src-hooks-usequeries-ts-automatically-refetches-every-15-seconds-refetchinterval-15000-and-invalidates-and-refetches-immediately-after-any-acceptorder-or-updateorderstatus-mutation-completes-successfully",
      "title": "Ensure the `useAllOrders` query in `frontend/src/hooks/useQueries.ts` automatically refetches every 15 seconds (`refetchInterval: 15000`) and invalidates and refetches immediately after any `acceptOrder` or `updateOrderStatus` mutation completes successfully.",
      "reqIds": [
        "REQ-52"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-usedeleteorder-react-query-mutation-hook-in-frontend-src-hooks-usequeries-ts-that-calls-actor-deleteorder-orderid-on-success-the-hook-must-invalidate-the-allorders-query-key-so-the-courier-app-dashboard-reflects-the-removal-immediately",
      "title": "Add a `useDeleteOrder` React Query mutation hook in `frontend/src/hooks/useQueries.ts` that calls `actor.deleteOrder(orderId)`. On success, the hook must invalidate the `allOrders` query key so the Courier App dashboard reflects the removal immediately.",
      "reqIds": [
        "REQ-54"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-delete-order-button-to-each-order-card-in-the-courier-app-dashboard-frontend-src-pages-courierapp-tsx-and-or-frontend-src-components-ordercard-tsx-the-button-must-show-a-confirmation-prompt-before-invoking-the-usedeleteorder-mutation-on-successful-deletion-the-order-must-disappear-from-the-dashboard-without-a-page-reload-style-the-button-with-the-app-s-white-and-orange-f97316-theme",
      "title": "Add a 'Delete Order' button to each order card in the Courier App dashboard (`frontend/src/pages/CourierApp.tsx` and/or `frontend/src/components/OrderCard.tsx`). The button must show a confirmation prompt before invoking the `useDeleteOrder` mutation. On successful deletion, the order must disappear from the dashboard without a page reload. Style the button with the app's white and orange (#F97316) theme.",
      "reqIds": [
        "REQ-55"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-components-ordercard-tsx-and-frontend-src-pages-courierapp-tsx-remove-all-intermediate-status-action-buttons-accept-preparing-out-for-delivery-from-each-order-card-each-order-card-must-display-exactly-two-action-buttons-1-deliver-calls-updateorderstatus-to-set-the-order-status-directly-to-delivered-and-2-delete-shows-a-confirmation-prompt-then-calls-usedeleteorder-no-other-status-advancement-controls-should-be-present",
      "title": "In `frontend/src/components/OrderCard.tsx` and `frontend/src/pages/CourierApp.tsx`, remove all intermediate status action buttons (Accept, Preparing, Out for Delivery) from each order card. Each order card must display exactly two action buttons: (1) **Deliver** — calls `updateOrderStatus` to set the order status directly to `delivered`, and (2) **Delete** — shows a confirmation prompt then calls `useDeleteOrder`. No other status-advancement controls should be present.",
      "reqIds": [
        "REQ-56"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-components-orderfilters-tsx-remove-filter-tabs-for-accepted-preparing-and-out-for-delivery-statuses-the-filter-bar-must-only-show-tabs-relevant-to-the-simplified-workflow-pending-delivered-and-cancelled-plus-an-all-option",
      "title": "In `frontend/src/components/OrderFilters.tsx`, remove filter tabs for `accepted`, `preparing`, and `out_for_delivery` statuses. The filter bar must only show tabs relevant to the simplified workflow: `pending`, `delivered`, and `cancelled` (plus an 'All' option).",
      "reqIds": [
        "REQ-57"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Customer portal for browsing menu and placing food orders",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Courier app for accepting orders and updating order status (preparing, out for delivery, delivered, etc.)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Shared backend database to track and persist orders across both apps",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Create a backend Motoko actor with a persistent orders database. The data model must include: orderId, customerId (or customer name/contact), list of ordered items (item name, quantity, price), total price, order timestamp, and order status (one of: 'pending', 'accepted', 'preparing', 'out_for_delivery', 'delivered', 'cancelled'). Expose CRUD functions: placeOrder, getOrderById, getOrdersByCustomer, getAllOrders, updateOrderStatus, and cancelOrder.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Create a backend function to manage a food menu. The menu should contain items with: itemId, name, description, price, category (e.g., 'Burgers', 'Drinks', 'Sides'), and availability (boolean). Expose functions: getMenu (returns all available items) and getMenuByCategory.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Split into two separate standalone frontend apps (Customer Portal and Courier App) sharing one Motoko backend; remove cross-app navigation bar from both",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Add Internet Identity login (passkeys, Google, Apple, Microsoft) to Customer Portal with account profiles (saved name/contact) and order history",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Add navigation bar to Customer Portal with Browse Menu, My Orders, and Account sections; checkout pre-fills from account profile and ties orders to logged-in user",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Add a customer profile system to the backend. Associate a profile with each Internet Identity principal. The profile must store: name (text) and phone number (text). Expose functions: getProfile(principal) and saveProfile(principal, name, phone). Orders placed while authenticated must store the caller's principal as customerId.",
      "reqIds": [
        "REQ-7"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Generate a migration file (backend/migration.mo) to preserve existing in-memory order and menu data when upgrading the backend actor to add the new customer profiles stable map. Ensure existing orders, menu items, and their state are retained after the upgrade.",
      "reqIds": [
        "REQ-11"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Rename the app to 'The Deccan BHOJAN' across both the Customer Portal and Courier App",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Add a Menu Management section to the Courier App allowing: add new menu items, edit existing items (name, description, price, category), toggle item availability, and delete items permanently",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Add backend support for full menu management: expose addMenuItem, updateMenuItem, toggleMenuItemAvailability, and deleteMenuItem functions in the Motoko actor. addMenuItem accepts name, description, price, and category and returns the new item. updateMenuItem accepts itemId plus updatable fields. toggleMenuItemAvailability accepts itemId and flips the availability boolean. deleteMenuItem accepts itemId and removes the item permanently.",
      "reqIds": [
        "REQ-15"
      ],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Add a PIN-based access gate to the Courier App. Visiting /courier shows a PIN entry screen; entering '1953' grants access to the full dashboard. Wrong PIN shows an error. Access persists in localStorage. A 'Lock' button lets the courier log out of the Courier App.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Update color scheme to white and orange (#F97316) across both Customer Portal and Courier App — fix transparent/missing fill on all backgrounds, nav bars, buttons, cards, badges, headers, and form elements",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Fix 'admin access needed' error blocking menu editing in Courier App Menu Management — remove any remaining role-based or admin access checks so PIN-authenticated users have full access to add, edit, toggle, and delete menu items",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Remove all remaining role-based access control and admin permission checks from the Motoko backend actor (backend/main.mo) for the menu management functions: addMenuItem, updateMenuItem, toggleMenuItemAvailability, and deleteMenuItem. These functions must be callable by any authenticated or anonymous caller without checking for a specific admin principal or role. Do not require any caller identity validation in these four functions.",
      "reqIds": [
        "REQ-24"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Fix: Orders placed in Customer Portal do not appear on the Courier App dashboard — trace order placement and fetching to ensure all orders are visible to courier regardless of caller principal",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Fix: Toggling item availability in Menu Management permanently deletes the item instead of flipping the availability flag — fix toggleMenuItemAvailability mutation to only update availability",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Fix the backend `placeOrder` function in `backend/main.mo` to ensure every placed order is stored in the shared stable orders map and is retrievable by `getAllOrders` regardless of which caller principal placed the order. Verify that `getAllOrders` returns the complete list of all orders across all customers without filtering by caller identity. If `placeOrder` currently stores orders in a per-caller or per-customer scoped structure that is not traversed by `getAllOrders`, refactor both functions so all orders share a single canonical stable map keyed by `orderId`.",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Fix the `toggleMenuItemAvailability` function in `backend/main.mo` so it only flips the `availability` boolean of the target menu item and does not delete or remove the item. The function must locate the item by `itemId` in the stable menu map, toggle its `availability` field (true → false or false → true), update the map entry, and return the updated item. It must never call or invoke any deletion logic.",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Remove all remaining role-based access control, admin role checks, and Internet Identity principal checks from the backend Motoko actor (backend/main.mo) for the menu management functions: addMenuItem, updateMenuItem, toggleMenuItemAvailability, and deleteMenuItem. These four functions must be callable by any caller (authenticated or anonymous) without validating caller identity or role. No 'admin access needed' error must ever be returned from these functions.",
      "reqIds": [
        "REQ-29"
      ],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Audit and fix the frontend MenuManagementSection.tsx and CourierApp.tsx to ensure no client-side admin role check, Internet Identity principal guard, or permission gate blocks a PIN-authenticated user from invoking add, edit, toggle availability, or delete menu item operations. Any remaining guard that checks for an admin role or authenticated principal before enabling or calling these mutations must be removed.",
      "reqIds": [
        "REQ-30"
      ],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "Fix the backend placeOrder function in backend/main.mo to store every placed order in a single shared stable map keyed by orderId, regardless of which caller principal placed the order. Fix getAllOrders to return all entries from this single canonical map without filtering by caller identity or customer principal. If orders are currently stored in a per-caller or per-customer scoped structure not fully traversed by getAllOrders, refactor both functions to use one unified stable orders map.",
      "reqIds": [
        "REQ-31"
      ],
      "status": "pending"
    },
    {
      "id": "AR-35",
      "summary": "Fix order persistence and sync issues: (1) orders disappearing on Customer Portal refresh — re-fetch from backend on mount instead of relying on transient React state; (2) Courier App order status resetting to 'Accept Order' on refresh — read status from backend stable map on every load; (3) Order status not reflecting on Customer side — add polling or query invalidation so My Orders view stays in sync with latest backend status",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-36",
      "summary": "Audit and fix the backend `placeOrder` function in `backend/main.mo` to ensure every placed order is stored in a single canonical stable map keyed by `orderId`, independent of the caller's principal. Fix `getAllOrders` to return all entries from this single map without any per-caller or per-customer filtering. Fix `getOrdersByCustomer` to query from the same canonical map filtered only by the stored `customerId` field. If orders are currently stored in any per-caller or per-customer scoped structure that is not fully traversed by `getAllOrders`, refactor both functions to use the one unified stable orders map.",
      "reqIds": [
        "REQ-33"
      ],
      "status": "pending"
    },
    {
      "id": "AR-37",
      "summary": "Remove all remaining authorization/role checks from the backend `addMenuItem`, `updateMenuItem`, `toggleMenuItemAvailability`, and `deleteMenuItem` functions in `backend/main.mo`. These four functions must not check the caller's principal, role, or any admin flag. Any call to `MixinAuthorization`, `AccessControl`, `isAdmin`, or similar guards inside these functions must be deleted. The functions must execute successfully for any caller — authenticated or anonymous — without returning any 'Unauthorized' or 'Only admins' error variant.",
      "reqIds": [
        "REQ-38"
      ],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Audit and fix the `placeOrder` and `getAllOrders` functions in `backend/main.mo` to ensure all placed orders are stored in a single canonical stable map keyed by `orderId` and that `getAllOrders` returns every entry from that map without filtering by caller identity or customer principal. If `placeOrder` currently writes to any per-caller or per-customer scoped structure that is not fully traversed by `getAllOrders`, refactor both functions to use one unified stable orders map. Additionally, `getOrdersByCustomer` must query from the same canonical map, filtering only by the stored `customerId` field — not by the caller's principal.",
      "reqIds": [
        "REQ-39"
      ],
      "status": "pending"
    },
    {
      "id": "AR-39",
      "summary": "Audit and fix the `placeOrder` and `getAllOrders` functions in `backend/main.mo` to ensure all placed orders are stored in a single canonical stable map keyed by `orderId` and that `getAllOrders` returns every entry from that map without filtering by caller identity or customer principal. If `placeOrder` currently writes to any per-caller or per-customer scoped structure not fully traversed by `getAllOrders`, refactor both functions to use one unified stable orders map. `getOrdersByCustomer` must query from the same canonical map, filtering only by the stored `customerId` field — not by the caller's principal. Remove all remaining authorization/role checks from `addMenuItem`, `updateMenuItem`, `toggleMenuItemAvailability`, and `deleteMenuItem` — these four functions must execute successfully for any caller without returning any 'Unauthorized' or 'Only admins' error.",
      "reqIds": [
        "REQ-44"
      ],
      "status": "pending"
    },
    {
      "id": "AR-40",
      "summary": "Add a delete order option to the Courier App dashboard so couriers can permanently remove orders",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-44",
      "summary": "Add a `deleteOrder` function to the Motoko backend actor in `backend/main.mo`. The function must accept an `orderId` (Nat) and permanently remove the matching entry from the canonical stable orders map. It must return a `Result` indicating success or a `#notFound` error if the order does not exist. No caller identity or role check is required.",
      "reqIds": [
        "REQ-53"
      ],
      "status": "pending"
    },
    {
      "id": "AR-45",
      "summary": "Remove all intermediate order status stages (accepted, preparing, out_for_delivery) from the Courier App order cards. Each order card must only show two actions: Delete (removes the order) and Deliver (marks it as delivered). The order workflow goes directly from pending → delivered with no intermediate steps.",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Food Order & Delivery Platform",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}